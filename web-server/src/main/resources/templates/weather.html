<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather Information</title>
</head>
<body>
<nav th:insert="~{navbar :: navbar}"></nav>
<a href="/" th:href="@{/}">
    <img th:src="@{/img/logo.png}" id="logo" alt="Googol logo">
</a>

<form action="/weather" method="get">
    <input type="text" name="city" placeholder="Enter city name">
    <input type="submit" value="Search">
</form>

<button onclick="useClientCoordinates()">Use my coordinates</button>

<div th:if="${weather != null}">
    <h2>Weather Information</h2>
    <p th:text="'City: ' + ${weather.name}"></p>
    <p th:text="'Temperature: ' + ${weather.main.temp} + 'Â°C'"></p>
    <p th:text="'Weather: ' + ${weather.weather[0].main} + ' ' + ${weatherIcon}"></p>
    <p th:text="'Humidity: ' + ${humidity} + '%'"></p>
    <p th:text="'Wind Speed: ' + ${windSpeed} + ' km/h'"></p>
</div>

<script>
function useClientCoordinates() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            window.location.href = '/weather?lat=' + position.coords.latitude + '&lon=' + position.coords.longitude;
        });
    } else {
        alert("Geolocation is not supported by this browser.");
    }
}
</script>

</body>
</html>